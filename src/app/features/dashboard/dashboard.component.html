<div class="dashboard-shell">
  <app-dashboard-sidebar [activeView]="activeView" (viewChange)="setActiveView($event)"></app-dashboard-sidebar>

  <div class="dashboard-shell__content">
    <header class="dashboard-shell__header">
      <div>
        <h1>AI Video Operations</h1>
        <p>Orchestrate automated content workflows, approvals, and publishing.</p>
      </div>
      <div class="dashboard-shell__user">
        <span *ngIf="currentUser$ | async as user">Hoş geldiniz, {{ user.firstName || user.username }}!</span>
        <button type="button" class="btn btn-outline" (click)="logout()">Çıkış Yap</button>
      </div>
    </header>

    <section class="dashboard-shell__view" [ngSwitch]="activeView">
      <app-dashboard-home
        *ngSwitchCase="'dashboard'"
        (newProject)="openNewProjectModal()"
        [overview]="overview$ | async"
        [loading]="isOverviewLoading"
        [errorMessage]="errorMessage"
        (retry)="reloadOverview()"
      ></app-dashboard-home>
      <app-workflow-list 
        *ngSwitchCase="'workflows'" 
        (newWorkflow)="handleNewWorkflow()"
        (editWorkflow)="openEditWorkflowModal($event)"
      ></app-workflow-list>
      <app-calendar-view *ngSwitchCase="'calendar'"></app-calendar-view>
      <app-history-view *ngSwitchCase="'history'"></app-history-view>
      <app-settings-view *ngSwitchCase="'settings'"></app-settings-view>
      <app-telegram-connect *ngSwitchCase="'telegram'"></app-telegram-connect>
    </section>
  </div>

  <app-new-project
    *ngIf="isNewProjectOpen"
    [saving]="isCreatingWorkflow || isUpdatingWorkflow"
    [workflow]="editingWorkflow"
    (close)="closeNewProject()"
    (save)="handleProjectSave($event)"
  ></app-new-project>
</div>

